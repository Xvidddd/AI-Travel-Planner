# 开发计划与里程碑

## 1. 迭代节奏
- **迭代长度**：1 周 / sprint，共 5 个开发迭代 + 1 个硬化迭代。
- **每日例会**：15 min 站会，跟踪语音、AI、地图三条主线。
- **协作工具**：Linear/Trello 看板 + GitHub Projects + Supabase Studio。

## 2. 里程碑
| 里程碑 | 时间 | 交付内容 |
| --- | --- | --- |
| M0 - 项目启动 | Week 0 | 完成需求/架构/计划/测试文档；搭建仓库与 CI 基线 |
| M1 - 骨架就绪 | Week 1 | Next.js 基础框架、UI 主题、路由、Supabase Auth 接入 |
| M2 - AI 行程 MVP | Week 2 | 语音输入→LLM→行程落库流程、时间线 + 地图联动 Demo |
| M3 - 预算与记账 | Week 3 | 费用模型、语音记账、预算可视化、Edge Functions |
| M4 - 协作与设置 | Week 4 | 行程版本管理、Key 管理面板、体验优化 |
| M5 - 硬化 | Week 5 | 全量测试、Docker 镜像、文档与 PDF、Demo 视频 |

## 3. 工作分解结构（WBS）
1. **平台基建**：项目初始化、UI 主题、组件库封装、API 代理层。
2. **语音系统**：UI 控件、状态机、音频处理、讯飞接入、容错逻辑。
3. **AI 规划**：Prompt 设计、LLM Provider 接口、结果验证、版本管理。
4. **预算记账**：语义解析、分类映射、可视化、Edge Functions。
5. **地图体验**：高德主题样式、POI 标注、时间线联动、路线预览。
6. **用户与协作**：Supabase Auth、RLS、共享机制、设置面板。
7. **DevOps**：CI/CD、Docker、多环境配置、PDF 输出、交付清单。

## 4. 资源与角色
- **全栈工程师 x2**：Next.js + Supabase + DevOps。
- **前端/设计 x1**：视觉规范、组件、动画。
- **测试/交付 x1**：自动化测试、验收、文档。
- **产品/Prompt x1**：需求把控、Prompt 迭代。

## 5. 风险与缓解
| 风险 | 影响 | 缓解措施 |
| --- | --- | --- |
| 第三方 API 限流 | 无法生成行程/语音失败 | 建立多 Provider 兜底 + 重试队列 |
| 语音识别准确率不足 | 记账/需求录入失败 | 文本 fallback + 自学习词典 |
| 地图加载资源大 | 首屏速度慢 | 懒加载地图、使用 vector tiles、预渲染首屏 |
| LLM 输出不稳定 | 数据格式异常 | JSON schema 校验 + 自我修复 Edge Function |
| 交付文档遗漏 | 验收受阻 | 建立文档清单 + CI 校验 PDF 生成 |

## 6. 衡量方式
- Sprint 结束提供 Demo、度量燃尽图。
- CI 通过率、代码覆盖率、性能基准纳入 Definition of Done。
